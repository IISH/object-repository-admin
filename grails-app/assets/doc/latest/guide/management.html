<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>8 Administration interface 1.4</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/sip.html"><strong>2</strong><span>Submission information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/ingest.html"><strong>3</strong><span>Ingest</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/aip.html"><strong>4</strong><span>Archival information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/storage.html"><strong>5</strong><span>Archival Storage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/dip.html"><strong>6</strong><span>Dissemination information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/preparation.html"><strong>7</strong><span>Preparing the submission package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/management.html"><strong>8</strong><span>Administration interface</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Object repository</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/preparation.html">&lt;&lt; <strong>7</strong><span>Preparing the submission package</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                


                <div class="project">
                    <h1>8 Administration interface - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Lucien van Wouw</p>

                    <p><strong>Version:</strong> 1.4</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_stagingarea"><strong>8.1</strong><span>Staging area Ftp accounts</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_user"><strong>8.2</strong><span>Dissemination Accounts</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_api"><strong>8.3</strong><span>Dissemination Accounts API</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_profile"><strong>8.4</strong><span>Profile</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_policy"><strong>8.5</strong><span>Access policies</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_instruction"><strong>8.6</strong><span>Managing and monitoring instructions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#management_orfiles"><strong>8.7</strong><span>Stored files</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="management">8 Administration interface</h1>
The administration interface is where a CP administrator can:
<ul class="star">
<li>create ftp accounts.</li>
<li>set a profile. That is, defaults for the processing instruction such as access, mimetype, the prefered services to use</li>
<li>define access policies</li>
<li>oversee the production of instructions, starting procedures and monitor the status</li>
<li>download technical metadata of stored material</li>
</ul><p class="paragraph"/> Access to the administration interface is possible via a privileged account only. Such accounts cannot be set
 via the administration interface directly. Contact the administrator directly to set such accounts.


<h2 id="management_stagingarea">8.1 Staging area Ftp accounts</h2>
Upload and file arrangements are done with an ftp client. You can manage the required ftp accounts at the "Staging Area" section.<p class="paragraph"/><h4>Create a user</h4>
Fill in or edit the following fields:
<ul class="star">
<li><code>Login name</code>: A user name containing letters and numbers</li>
<li><code>Password</code>: If the password is left blank, a random password will be created</li>
<li><code>E-mail</code>: The end-user's mail address.</li>
<li><code>Enabled</code>: If on, the account can be used to login.</li>
</ul><p class="paragraph"/>Press save to store. An account confirmation message is sent to the e-mail. It contains all user and ftp details to login.<p class="paragraph"/><h4>Editing and removing</h4>
Any account can be modified and deleted. If you delete an ftp account; the user's uploaded files and home
directory still remain on the staging area. You need to move or delete these yourself with your ftp administration account.



<h2 id="management_user">8.2 Dissemination Accounts</h2>
The "Dissemination Accounts" section will allow you to manage user accounts. Such accounts can operate or download
repository resources. You can specify what access policies are available to the user and what resources are available
to the user and under that conditions.<p class="paragraph"/><h4>Create a user</h4>
You need to fill in or edit the following fields:
<ul class="star">
<li><code>Login name</code>: A user name containing letters and numbers</li>
<li><code>Password</code>: If the password is left blank, a random password will be created</li>
<li><code>E-mail</code>: The end-user's mail address.</li>
<li><code>Enabled</code>: If on, the account can be used to login.</li>
<li><code>Access Scope</code>: see below for more details</li>
</ul><p class="paragraph"/><h4>Webservice key</h4>
Each account type has a webservice key. The key is intended to access an object repository resource that is
normally closed for anonymous users. The key needs to be attached to the resolve URL that points to a resource.
Or be in the header file of a client that is responsible for downloading the files.<p class="paragraph"/>To modify the webservice key select "Change key"<p class="paragraph"/><blockquote class="note">Each time you change the access scope settings, this key will change too. You must update your software client or inform the end user of the new key</blockquote><p class="paragraph"/><h4>Access Scope</h4>
This setting determines what a user can access.<p class="paragraph"/><h5>Set access by Policy</h5>
Your repository resources are governed by access policies. If the user is allowed to download files with one or more of these policies, then select them here.<p class="paragraph"/><h5>'all'</h5>
This account can access all resources, no matter their access policy.<p class="paragraph"/><h5>'administration'</h5>
This account type has the same scope as the 'all' setting. In addition it allows a client to operate the repository API.
All actions regarding account and permission creation can be operated via API calls using the webservice key.<p class="paragraph"/><h5>Manage access to resources</h5>
Leave the access scope option blank and save the account. You can then show the account and select the 'manage access to resources' option.
In this section you can specify the resources by it's PID or OBJID value. Select 'New Userresource' to add a new resource.
<ul class="star">
<li><code>Resource&#80;id</code> : The PID value of the individual resource. Or objid of the resources</li>
<li><code>Download limit</code> (default is no limit) : The number of times a user is allowed to download this resources. Set to zero for no limit.</li>
<li><code>Apply downloadlimit for levels</code> : The levels this download limit applies to.</li>
<li><code>Expiration date</code> (default is no date) : The end date the resource is available</li>
</ul><p class="paragraph"/>Once one or more resources are declared this way, the user can visit their "User's download page". It will show all available ( and possibly expired ) resources and the way those resources are disseminated.
The location of this page is:<p class="paragraph"/><code>http://[object repository domain]/resource?access_token=[webservice key]</code><p class="paragraph"/>
<h4>Editing and removing</h4>
Any account can be modified and deleted. The webservice key will change when the Access Scope setting changed.



<h2 id="management_api">8.3 Dissemination Accounts API</h2>
You can create new user accounts and defined the access to resources with API calls. To make those calls your client needs an administration account and it's webservice key that goes with it.
The API will allow you to:
<ul class="star">
<li>create a user account</li>
<li>re-set a user account, refreshing the webservice key or password</li>
<li>add or update access to resources; setting optional download limits and expiration dates</li>
</ul><p class="paragraph"/>You cannot:
<ul class="star">
<li>delete a user account</li>
<li>create 'administration' and 'all' accounts</li>
<li>set policy access</li>
<li>delete resources access</li>
<li>create or update an account with a username created by a different object repository owner</li>
</ul><p class="paragraph"/><h4>Content type</h4>
The API content type can be JSON and XML. It's entry point is:<p class="paragraph"/><code>http://[object repository domain]/[your naming authority]/user</code><p class="paragraph"/><h4>Creating an account parameters</h4>
<ul class="star">
<li>user.username: the login name</li>
<li>user.password: the unencrypted password. If empty this will automatically create a password</li>
<li>user.mail: an e-mail address</li>
<li>user.resources: the list of repository resources that can be accessed with this account</li>
<li>user.resources.userResource: a resource element with:</li>
<ul class="star">
<li>pid: the PID of OBJID</li>
<li>downloadLimit (default 0)</li>
<li>expirationDate (default none): format YYYY-mm-DD</li>
<li>buckets ( default 'master' ): a repeatable list of levels the downloadLimit and expirationDate apply to</li>
</ul></ul><p class="paragraph"/><h4>Updating an account parameters</h4>
An existing account will be updated when you use the same user.username value
<ul class="star">
<li>user.replaceKey ( default false ): will change the webservice key</li>
</ul><p class="paragraph"/><h4>Examples</h4>
To create or update a user account; and set the access for two resources, one with a download limit, another with an expiration date, sent:<p class="paragraph"/>Request:
<div class="code"><pre>POST /12345/user HTTP/1.1
Accept: &#42;/&#42;
Connection: Keep&#45;Alive
Content&#45;Type: text/xml; charset=utf&#45;8
Authorization: Bearer &#91;webservice key&#93;</pre></div><p class="paragraph"/><div class="code"><pre><span class="xml&#45;tag">&#60;user&#62;</span>
  <span class="xml&#45;tag">&#60;username&#62;</span>a username<span class="xml&#45;tag">&#60;/username&#62;</span>
  <span class="xml&#45;tag">&#60;password&#62;</span>a password<span class="xml&#45;tag">&#60;/password&#62;</span>
  <span class="xml&#45;tag">&#60;mail&#62;</span>an e&#45;mail address<span class="xml&#45;tag">&#60;/mail&#62;</span>
  <span class="xml&#45;tag">&#60;resources&#62;</span>
    <span class="xml&#45;tag">&#60;userResource&#62;</span>
        <span class="xml&#45;tag">&#60;downloadLimit&#62;</span>100<span class="xml&#45;tag">&#60;/downloadLimit&#62;</span>
        <span class="xml&#45;tag">&#60;pid&#62;</span>12345/a&#45;pid<span class="xml&#45;tag">&#60;/pid&#62;</span>
        <span class="xml&#45;tag">&#60;buckets&#62;</span>master<span class="xml&#45;tag">&#60;/buckets&#62;</span>
        <span class="xml&#45;tag">&#60;buckets&#62;</span>level1<span class="xml&#45;tag">&#60;/buckets&#62;</span>
    <span class="xml&#45;tag">&#60;/userResource&#62;</span>
    <span class="xml&#45;tag">&#60;userResource&#62;</span>
        <span class="xml&#45;tag">&#60;expirationDate&#62;</span>2020&#45;01&#45;01<span class="xml&#45;tag">&#60;/expirationDate&#62;</span>
        <span class="xml&#45;tag">&#60;pid&#62;</span>12345/another&#45;pid<span class="xml&#45;tag">&#60;/pid&#62;</span>
     <span class="xml&#45;tag">&#60;/resources&#62;</span>
<span class="xml&#45;tag">&#60;/user&#62;</span></pre></div><p class="paragraph"/>Which is - had you sent it as text/json - equivalent to:
<div class="code"><pre>&#123;
    user:&#123;
        username: 'a username',
        password: 'a password',
        mail: 'an e&#45;mail address',
        resources:&#91;
            &#123;
                pid:'12345/a&#45;pid',
                buckets:'master',
                buckets:'level1',
                downloadLimit:100
                &#125;,
                &#123;
                pid:'12345/another&#45;pid',
                expirationDate:'2020&#45;01&#45;01'&#125;
        &#93;
        &#125;
&#125;</pre></div><p class="paragraph"/>Response:
<div class="code"><pre><span class="xml&#45;tag">&#60;user&#62;</span>
  <span class="xml&#45;tag">&#60;message&#62;</span>ok<span class="xml&#45;tag">&#60;/message&#62;</span>
  <span class="xml&#45;tag">&#60;url&#62;</span>http://&#91;repository&#45;url&#93;/resource/list?access_token=&#91;webservice key&#93;<span class="xml&#45;tag">&#60;/url&#62;</span>
  <span class="xml&#45;tag">&#60;username&#62;</span>a username<span class="xml&#45;tag">&#60;/username&#62;</span>
  <span class="xml&#45;tag">&#60;password&#62;</span>a password<span class="xml&#45;tag">&#60;/password&#62;</span>
<span class="xml&#45;tag">&#60;/user&#62;</span></pre></div><p class="paragraph"/>Which JSON equivalent is
<div class="code"><pre>&#123;
    <span class="java&#45;quote">"user"</span>:&#123;
        <span class="java&#45;quote">"message"</span>:<span class="java&#45;quote">"ok"</span>,
        <span class="java&#45;quote">"url"</span>:<span class="java&#45;quote">"http://&#91;repository&#45;url&#93;/resource/list?access_token=&#91;webservice key&#93;"</span>,
        <span class="java&#45;quote">"username"</span>:<span class="java&#45;quote">"a username"</span>,
        <span class="java&#45;quote">"password"</span>:<span class="java&#45;quote">"a password"</span>
        &#125;
&#125;</pre></div>


<h2 id="management_profile">8.4 Profile</h2>
The profile is where you set the default values that are taken over by any processing instruction. That is:  Settings in
the profile substitute any absent values in the XML processing instruction. It makes sense therefore, to place all your
broad access policies and most frequently used file content values.<p class="paragraph"/>The available options are described at the <a href="../guide/single.html#preparation_instruction_settings" class="guide">settings section</a>.


<h2 id="management_policy">8.5 Access policies</h2>
A policy determines what an  <em class="italic">anonymous user</em>   can and cannot do. Lets say that is a person with a webbrowser who is not
logged on to the object repository. Access to each master file and its related derivatives are thus governed by a
policy.<p class="paragraph"/>There are three main policies available:
<table class="wiki-table" cellpadding="0" cellspacing="0" border="0"><tr><th><strong class="bold">policy</strong></th><th><strong class="bold">access</strong></th></tr><tr class="table-odd"><td>closed</td><td>no files can be downloaded or viewed</td></tr><tr class="table-even"><td>restricted</td><td>level 1 derivatives are  <em class="italic">restricted</em> ; level 2 and 3 are viewable to the world</td></tr><tr class="table-odd"><td>open</td><td>All derivatives are viewable to the world</td></tr></table><p class="paragraph"/>The meaning of <strong class="bold">restricted</strong> means the anonymous user can only see the file with a webservice key. Even though
at this moment this is not the case, this setting can be used to offer for example a "give me persmission to see this
file" option. This will never be the case when the file is closed.<p class="paragraph"/><h3>Custom policies</h3>
You cannot modify these default policies, but to add your own custom policy is easily done by selecting "New Policy".
For each master and derivative you can  determine it's access level.



<h2 id="management_instruction">8.6 Managing and monitoring instructions</h2>
Each main folder in the staging area you see is represented here.<p class="paragraph"/>The moment when a XML instruction is offered; or when it is autocreated, the number of declared files will show up.
In addition each file will have a validation status. The files can be viewed by selecting the link of the main folder.<p class="paragraph"/><h3>Commands</h3>
<code>Autocreate</code>
This will autocreate an instruction. Press it and depending on the number of files, the instruction will be put into
the database.<p class="paragraph"/><blockquote class="note">that the use of this service will not apply a checksum comparison between the content at the producer's side (outside the staging area that is ). And the material stored onto the staging area. The content producer should decide if the transport is reliable enough to ensure the data's integrity.</blockquote><p class="paragraph"/><code>Recreate</code>
This option is available at the "Stored objects panel". It will reconstruct an earlier used instruction.
This command will not work, if there are still files staged with an existing instruction.<p class="paragraph"/><code>Download</code>
One you created or uploaded an instruction, it can be downloaded as an XML instruction document.<p class="paragraph"/><blockquote class="note">Unfortunately, the download onto to the staging area of an instruction is not possible because of server
permissions. Choose the "download instructions via the browser" option in stead.</blockquote><p class="paragraph"/><code>Upload</code>
You can upload a XML instruction here so it will be placed on the staging area. FTP is also a way of uploading an
instruction.<p class="paragraph"/><code>Validate</code>
Will perform a check on the instruction vis-a-vis the files in the staging area.<p class="paragraph"/><code>Process files</code>
Kick starts the instruction<p class="paragraph"/><blockquote class="note">
If you monitor the progress of for example an upload, creation or validation of an instruction it will eventually
finish. However no <code>ingest instruction</code> option seems to appear. To make it appear, press the browser's refresh button.
</blockquote><p class="paragraph"/><h3>Monitoring</h3>
Each phase or step in the creation and running of an instruction can be monitored. The same for each individual files.
During an ingest, you can see the accumulative result of all files by selecting the link of the main folder.<p class="paragraph"/><h4>Instruction status</h4>
This is the particular status of an instruction.<p class="paragraph"/><img border="0" class="center" src="../img/statusinstruction.gif"></img><p class="paragraph"/><h4>Files status accumulative</h4>
All progress for the files<p class="paragraph"/><img border="0" class="center" src="../img/statusfiles.gif"></img><p class="paragraph"/><h4>Per file view</h4>
<img border="0" class="center" src="../img/statusfile.gif"></img><p class="paragraph"/><h4>Success and retries</h4>
When all services of a file have completed, the file reference will be removed from the staging area. In the end all
the declared files will be gone.<p class="paragraph"/>Of course, things can go wrong. In that case the error is mentioned and nothing will happen until the issue is resolved.
If you feel this is because of a bug or system application failure, please contact the service desk that operates the
object repository.<p class="paragraph"/>You can rerun instructions with different options. For example, because you want to change a label, access status,
produce derivatives, etc.


<h2 id="management_orfiles">8.7 Stored files</h2>
The files section will show all persisted files. Using the dropdown list, you can filter by instruction label.
Each file can be edited to change the policy and labeling.<p class="paragraph"/><img border="0" class="center" src="../img/orfiles.gif"></img><p class="paragraph"/>In addition, download all technical metadata as XML per file of for all the files. The XML does not follow a schema
and is subject to change.<p class="paragraph"/><code>Recreate instruction</code>
If you select a label from from the dropdown list; then you can use that selection to recreate an instruction.<p class="paragraph"/><code>Find by pid</code>
Use the PID of a file to display it in the list. Or use the objid of the compound object to find all grouped files.


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/preparation.html">&lt;&lt; <strong>7</strong><span>Preparing the submission package</span></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copyright (c) 2013 Social History Services
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
