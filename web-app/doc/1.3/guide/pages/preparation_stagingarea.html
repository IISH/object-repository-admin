<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>7.1 The staging area 1.3</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/sip.html"><strong>2</strong><span>Submission information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/ingest.html"><strong>3</strong><span>Ingest</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/aip.html"><strong>4</strong><span>Archival information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/storage.html"><strong>5</strong><span>Archival Storage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/dip.html"><strong>6</strong><span>Dissemination information package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/preparation.html"><strong>7</strong><span>Preparing the submission package</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../../guide/management.html"><strong>8</strong><span>Administration interface</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Object repository</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../../guide/dip.html">&lt;&lt; <strong>6</strong><span>Dissemination information package</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../../guide/management.html"><strong>8</strong><span>Administration interface</span> >></a></div>
                


                <div class="project">
                    <h1>7.1 The staging area - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Lucien van Wouw</p>

                    <p><strong>Version:</strong> 1.3</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#preparation_stagingarea_ftp"><strong>7.1</strong><span>Connecting to the stagingarea</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#preparation_stagingarea_datasets"><strong>7.2</strong><span>Folder and file conventions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#preparation_stagingarea_customderivatives"><strong>7.3</strong><span>Supply custom derivatives</span></a>
                    </div>
                    
                </div>
                

                

<h2 id="preparation_stagingarea">7.1 The staging area</h2>
Once you have selected the files intended for preservation and presentation you can upload these to the staging area. This is a work space where you can assemble your ingest package. Here you:
<ul class="star">
<li>use ftp to upload files to temporary storage and rearrange these</li>
<li>optionally upload a custom XML processing instruction</li>
</ul><p class="paragraph"/>


<h2 id="preparation_stagingarea_ftp">7.1.1 Connecting to the stagingarea</h2>
To connect to the staging area you need one or more ftp accounts. A CP administrator can use the <a href="../guide/single.html#management_user" class="guide">Accounts section</a> to manage these.<p class="paragraph"/><a href="http://filezilla-project.org/download.php?type=client" target="blank">FileZilla</a> and <a href="http://winscp.net/eng/download.php" target="blank">WinSCP</a> are known to work well with the staging area. To make a connection:
<ul class="star">
<li>create an ftp-account</li>
<li>set the host name of the staging area to the one mentioned in the ftp account confirmation e-mail</li>
<li>set the ftp client to support an <strong class="bold"></strong>explicit FTP over TLS<strong class="bold"></strong> connection</li>
<li>enable <strong class="bold"></strong>passive mode<strong class="bold"></strong>.</li>
<li>The ftp port to use is the default 21.</li>
</ul><p class="paragraph"/>As a rule (and avoid confusion) use the CP user account to upload files and XML processing instructions with. Not your
CP administrator account.



<h2 id="preparation_stagingarea_datasets">7.1.2 Folder and file conventions</h2>
After a CP user (of course, ftp procedures can be automated also) logs in with a ftp-account, the first directory visible
is the <strong class="bold"></strong>home directory<strong class="bold"></strong>. A FTP client will show this as a "/".<p class="paragraph"/>The user should at least upload one <strong class="bold"></strong>main folder<strong class="bold"></strong> containing files (your dataset) in the
home directory. This example illustrates the upload of a main folder called "unittest" and it contains a sub folder with 5 files.<p class="paragraph"/><img border="0" class="center" src="../img/fileset.gif"></img><p class="paragraph"/>See there are 10 files ? For each file you upload to the staging area, the FTP server produces a md5 checksum. This is
 stored next to the file in the format <code>filename.md5</code>. The checksum it contains is compared the one you
deliver in a <a href="../guide/single.html#preparation_instruction" class="guide">processing instruction</a> in order to assert integrity. It contains something like this:
<div class="code"><pre>181c838e29cbb0602da4a160eece2217  1.1.tif</pre></div><p class="paragraph"/><blockquote class="note">
You should not delete automatically created md5 files. If you do; the ingest of your files can take a long time.
</blockquote><p class="paragraph"/><blockquote class="note">Any folder or file that starts with a dot, will be ignored by the ingest procedures.
Also any digital file placed right in the home directory and not in a main folder will be ignored.</blockquote>



<h2 id="preparation_stagingarea_customderivatives">7.1.3 Supply custom derivatives</h2>
The object-repository has a service to create lower level copies of the masters. If you want you can add your own derivative material because it is of better quality or the type of derivative
manufacturing is not supported.<p class="paragraph"/><h3>Conventional offerings</h3>
The position and names of the derivatives must follow conventions:
<ul class="star">
<li>the root folder in which the derivative is placed must be called ".level1" or ".level2" or ".level3". Notice these names start with a dot.</li>
<li>the derivative filename must be identical ( case sensitive ) to that of the master filename - excluding the file extension. For example, if the master is called <code>MyFile.tiff</code> or <code>BigVideo.mpg</code> then the custom derivative must be positioned and named like <code>/.level1/MyFile.jpg</code> or <code>/.level2/BigVideo.mpg</code></li>
<li>the derivative must be parallel to the master file.</li>
<li>the extension of the derivative must be related to a known content type as <a href="http://github.com/IISH/object-repository-scripts/blob/master/shared/contenttype.txt" target="blank">indicated in this list</a>. If you see that your derivative extension is not in this list, then make a feature request.</li>
</ul><p class="paragraph"/>A few examples will clarify the points just made.<p class="paragraph"/><h4>Example 1</h4>
A master is placed deep within some subfolders: <code>/main_folder/b/c/d/myLargeFile.tiff</code>
And the derivative file is called <code>myLargeFile.png</code><p class="paragraph"/>Then a level1 derivative can be placed anywhere by <strong class="bold">inserting</strong> a <strong class="bold">.level1</strong> folder thus:
<ul class="star">
<li><code>/main_folder/b/c/d/.level1/myLargeFile.png</code></li>
<li><code>/main_folder/b/c/.level1/myLargeFile.png</code></li>
<li><code>/main_folder/b/.level1/d/myLargeFile.png</code></li>
<li><code>/main_folder/.level1/c/d/myLargeFile.png</code></li>
</ul><p class="paragraph"/>Or by <strong class="bold">substituting</strong> a folder so:
<ul class="star">
<li><code>/main_folder/b/c/.level1/myLargeFile.png</code></li>
<li><code>/main_folder/b/.level1/d/myLargeFile.png</code></li>
<li><code>/main_folder/.level1/c/d/myLargeFile.png</code></li>
</ul><p class="paragraph"/><h4>Example 2</h4>
A master is placed in the main folder <code>/mydataset/myVeryLargeMovie.mpg</code>
Then we offer both level1, level2 and a level3 file like this:
<ul class="star">
<li><code>/mydataset/.level1/myVeryLargeMovie.mpg</code></li>
<li><code>/mydataset/.level2/myVeryLargeMovie.mpg</code></li>
<li><code>/mydataset/.level3/myVeryLargeMovie.mpg</code></li>
</ul><p class="paragraph"/><blockquote class="note">The derivative service will first look a custom derivative. If it does not find a one, it will attempt to produce it</blockquote><p class="paragraph"/><h4>Supplying derivatives some time after an ingest</h4>
To add custom derivatives after the ingest is completed, you follow the same procedure:
<ul class="star">
<li>upload your custom derivative files according to the location convention</li>
<li>in case your instruction gives validation warnings on absent master locations: disable and save the plan's master and any other non-related derivative tasks. Then validate the instruction</li>
<li>Start processing your files.</li>
</ul><p class="paragraph"/>Should you have deleted your instruction, then either recreate it from the Stored objects menu. Or
re upload a new one which should contain the location elements from which the custom derivative can be found.<p class="paragraph"/><blockquote class="note">In case you re upload for the sake of ingesting custom derivatives, the location element need not be the same as the original master files from a previous instruction.</blockquote>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../../guide/dip.html">&lt;&lt; <strong>6</strong><span>Dissemination information package</span></a></div>
                
                    <div class="toc-item next-right"><a href="../../guide/management.html"><strong>8</strong><span>Administration interface</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copyright (c) 2013 Social History Services
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
